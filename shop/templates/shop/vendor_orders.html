{% extends "shop/base.html" %}

{% block content %}
<h2>Orders Containing Your Products</h2>

{% if orders %}
  <ul>
    {% for order in orders %}
      <li>
        <strong>Order #{{ order.id }}</strong> | Buyer: {{ order.buyer.username }} | Status: {{ order.status }}
        <ul>
          {% for item in order.items.all %}
            {% if item.product.vendor.user == request.user %}
              <li>{{ item.quantity }} x {{ item.product.name }} - R{{ item.price }}</li>
            {% endif %}
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No orders contain your products yet.</p>
{% endif %}
{% endblock %}
